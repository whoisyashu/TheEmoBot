// This is a simple example of how to use the Highrise SDK to create a bot.
const { Highrise, Events } = require("highrise.sdk");

// Change the token and room to your own.
const token = "change-me";
const room = "change-me";

// Create a new instance of the Highrise class.
const bot = new Highrise({
  Events: [
    Events.Messages,
    Events.Joins,
    Events.Leaves,
    Events.DirectMessages
  ],
  AutoFetchMessages: true, // Fetches messages on direct message events.
  Cache: true // Caches players in the room.
});

// Listen for the ready event.
bot.on('ready', (session) => {
  console.log(`Bot is now online in ${session.room_info.room_name}.`.cyan);
});

// Listen for chatCreate events.
bot.on("chatCreate", (user, message) => {
  console.log(`[CHAT]: ${user.username}:${user.id} - ${message}`);
});

// Listen for directMessage events.
bot.on("messageCreate", (user_id, data, message) => {
  console.log(`[DIRECT MESSAGE]: ${user_id}:${data.id} - ${message}`);
});

// Listen for playerJoin events.
bot.on('playerJoin', (user) => {
  console.log(`[PLAYER JOINED]: ${user.username}:${user.id}`);
});

// Listen for playerLeave events.
bot.on('playerLeave', (user) => {
  console.log(`[PLAYER LEFT]: ${user.username}:${user.id}`);
});

// Listen for unhandledRejection events.
// This is useful for catching errors that are not handled.
process.on('unhandledRejection', async (err, promise) => {
  console.error(`[ANTI-CRASH] Unhandled Rejection: ${err}`.red);
  console.error(promise);
});

// Login to the room.
bot.login(token, room);

##ready

bot.on('ready', (session) => {
  // Log that the bot is ready.
  console.log("[READY] Bot is ready!".green + ` Session: ${session}`);

  // Walk to the front left of the room.
  bot.move.walk(1, 0, 1, "FrontRight");
});

## Enabling The Event

```jsx
const { Highrise, Events } = require("highrise.sdk");

// Create a new instance of the Highrise class.
const bot = new Highrise({
  Events: [
    Events.Messages // Listen for chat messages.
  ]
});
```
## Enabling The Event

```jsx
const { Highrise, Events } = require("highrise.sdk");

// Create a new instance of the Highrise class.
const bot = new Highrise({
  Events: [
    Events.Joins, // Listen for player joins.
  ]
});
```

## ⚙️ Use cases

```jsx
bot.on('playerJoin', (user, position) => {
  console.log(`[PLAYER JOINED]: ${user.username}:${user.id} - ${position}`);

  // Send a welcome message to the user.
  bot.message.send(`Welcome to the room, ${user.username}!`);
});
```
## ⚙️ Use cases

```jsx
bot.on("chatCreate", (user, message) => {
  // Log the chat message to the console.
  console.log(`[CHAT]: ${user.username}:${user.id} - ${message}`)

  // If the message is "dance", then dance.
  if (message === "dance") {
    bot.player.emote(user.id, "idle-dance-casual");
  }
});
```

## Enabling The Event

```jsx
const { Highrise, Events } = require("highrise.sdk");

// Create a new instance of the Highrise class.
const bot = new Highrise({
  Events: [
    Events.Leaves, // Listen for player leave.
  ]
});
```

## ⚙️ Use cases

```jsx
bot.on('playerLeave', (user) => {
  console.log(`[PLAYER LEFT]: ${user.username}:${user.id}`)

  // Send a goodbye message to the user.
  bot.message.send(`Goodbye, ${user.username}!`);
});
```

## Enabling The Event

```jsx
const { Highrise, Events } = require("highrise.sdk");

// Create a new instance of the Highrise class.
const bot = new Highrise({
  Events: [
    Events.Tips // Listen for tips.
  ]
});
```

## ⚙️ Use cases

```jsx
bot.on("playerTip", (sender, receiver, tip) => {
  // log the tip to the console
  console.log(`[TIP]: ${sender.username}:${sender.id} - ${tip.amount} - ${receiver.username}:${receiver.id}`);
})
```

# Built in Methods

---

### **Bot Information Methods:**

The **`bot.info`** object provides methods for retrieving various information about the bot and the room it's currently in. These methods are built into the package to simplify development tasks by directly accessing essential bot and room details.

### Methods:

### **Retrieving** Bot ID:

```jsx
// Assuming you have defined the Highrise instance as "bot".
bot.on("chatCreate", async (user, message) => {
  if (message === "bot id") {
    const bot_id = bot.info.user.id;
    console.log('Bot ID:', bot_id);
  }
});
```

---

### **Retrieving Room ID:**

```jsx
// Assuming you have defined the Highrise instance as "bot".
bot.on("chatCreate", async (user, message) => {
  if (message === "room id") {
	  const roomId = bot.info.roomId();
	  console.log('Room ID:', roomId);
	}
});
```

---

### **Retrieving** Owner ID:

```jsx
// Assuming you have defined the Highrise instance as "bot".
bot.on("chatCreate", async (user, message) => {
  if (message === "owner id") {
    const owner_id = bot.info.owner.id;
    console.log('Owner ID:', owner_id);
  }
});
```

---

### Retrieving Connection ID:

```jsx
// Assuming you have defined the Highrise instance as "bot".
bot.on("chatCreate", async (user, message) => {
  if (message === "connection id") {
    const connection_id = bot.info.connection_id;
    console.log('Connection ID:', connection_id);
  }
});
```

---

### Retrieving Room Name:

```jsx
// Assuming you have defined the Highrise instance as "bot".
bot.on("chatCreate", async (user, message) => {
  if (message === "room name") {
    const room_name = bot.auth.room.name;
    console.log('Room Name:', room_name);
  }
});
```